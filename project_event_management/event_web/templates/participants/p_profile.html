{% extends "layout.html" %}

{% block title %}
Profile
{% endblock %}

{% block content %}
{% if user.role == "Participant" %}
<a href="{% url 'url_p_homepage' %}" class="btn_back"><b>Back</b></a>
{% elif user.role == 'Organizer'%}
<a href="{% url 'url_o_homepage' %}" class="btn_back"><b>Back</b></a>
{% endif %}
<div class="main_profile">
    <div class="ex3">
        <h2 class="ghost" style="color: white;">โปรไฟล์ของคุณ</h2>
    </div>
</div>
<div class="main_profile">
    <div class="profile">
        <div style="display: flex; gap: 15px;">
            <div class="pic_box_profile">
                <img src="/static/pic/dog.jpg" alt="" class="profile_pic">
            </div>
            <div style="align-self: end; padding-bottom: 20px;">
                <h3>{{ user.username }}</h3>
                <h6 style="font-size: 12px;">วันที่เข้าร่วม: {{ user.date_joined |date:"d M Y"}}</h6>
            </div>
        </div>
        <div class="profile_category">
            <button onclick="SwapUserDetail()" class="btn_profile"><b>ข้อมูลส่วนตัว</b></button>
            {% if user.role == "Participant"%}
            <button onclick="SwapActivityDetail()" class="btn_profile"><b>กิจกรรมที่ลงทะเบียน</b></button>
            {% endif %}
        </div>
    </div>
</div>
<div class="main_profile" id="userDetails" style="display: flex; flex-direction: column; align-items: center;">
    <div class="ex3" style="margin-top: 10px; color: white; display: flex;">
        <h3 style="text-align: center;">ข้อมูลส่วนตัว</h3>
        <div style="position: absolute; left: 60%;">
            <a href="{% url 'url_profile_edit' %}" class="btn_edit_user"><b>แก้ไขข้อมูล</b></a>
        </div>
    </div>
    <div class="profile_user_content">
        <div class="box1_profile">
            <div style="display: flex; justify-content: space-between;">
                <div class="box_user" style="flex: 50%;">
                    <h5>ชื่อ :</h5>
                    {% if user.first_name == null %}
                    <p>ยังไม่มีข้อมูล</p>
                    {% else %}
                    {{ user.first_name}}
                    {% endif %}
                </div>
                <div class="box_user" style="flex: 50%;">
                    <h5>นามสกุล :</h5>
                    {% if user.last_name == null %}
                    <p>ยังไม่มีข้อมูล</p>
                    {% else %}
                    {{ user.last_name}}
                    {% endif %}
                </div>
            </div>
            <div class="box_user">
                <h5>Email :</h5>
                {{ user.email }}
            </div>
            <div class="box_user">
                <h5>เบอร์ติดต่อ :</h5>
                {{ user.phone_number }}
            </div>
            <div class="box_user">
                <h5>เพศ</h5>
                {% if profile.gender == "M" %}
                <p>ชาย</p>
                {% elif profile.gender == "F" %}
                <p>หญิง</p>
                {% elif profile.gender == "O" %}
                <p>LGBT</p>
                {% else %}
                <p>ยังไม่มีข้อมูล</p>
                {% endif %}
            </div>
            <div style="display: flex; justify-content: space-between;">
                <div class="box_user" style="flex: 50%;">
                    <h5>อายุ</h5>
                    {% if profile.age == null %}
                    <p>ยังไม่มีข้อมูล</p>
                    {% else %}
                    {{ profile.age }}
                    {% endif %}
                </div>
                <div class="box_user" style="flex: 50%;">
                    <h5>วันเกิด</h5>
                    {% if profile.birthday == null %}
                    <p>ยังไม่มีข้อมูล</p>
                    {% else %}
                    {{ profile.birthday }}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
<div class="main_profile" id="activityDetails" style="display: none; flex-direction: column; align-items: center;">
    <div class="ex3" style="margin-top: 10px; color: white; display: flex;">
        <h3 style="text-align: center;">กิจกรรมของฉัน</h3>
    </div>
    <div class="profile_activity_content">
        <div class="box2_profile">
            {% for i in regis_activity %}
            <a class="block_event" href="{% url 'url_p_activitypage' i.id %}">
                {% if i.activity.activityimage_set.all %}
                    <img src="{{ i.activityimage_set.first.image_path.url }}" alt="" class="small_pic">
                {% else %}
                    <img src="/static/pic/dog.jpg" alt="" class="small_pic">
                {% endif %}
                <div class="card_content">
                    <h4 style="text-decoration: none;">{{ i.activity.title }}</h4>
                    <hr>
                    <p class="" ><i class="fa fa-calendar-check-o" style="font-size: 24px;"></i> : <b style="font-size: 18px;">{{ i.activity.start_date|date:"d/m/y H:i A" }}</b></p>
                    <p class=""><i class="fa fa-group" style="font-size:24px"></i> : <b style="font-size: 18px;">{{ i.activity.category.category_name }}</b></p>
                    <p class="short_description" style="font-size: 16px;"><b>{{ i.activity.short_description }}</b></p>
                </div>
            </a>
            {% empty %}
            <h2>ยังไม่มีกิจกรรมที่ลงทะเบียน</h2>
            {% endfor %} 
        </div>
    </div>
</div>

{% endblock %}

{% block script %}
<script>
    function SwapUserDetail() {
        document.getElementById('userDetails').style.display = 'flex';
        document.getElementById('activityDetails').style.display = 'none';
    }

    function SwapActivityDetail() {
        document.getElementById('userDetails').style.display = 'none';
        document.getElementById('activityDetails').style.display = 'flex';
    }
</script>
{% endblock %}